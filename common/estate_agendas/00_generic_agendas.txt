
#Triggers: any province has the basic conditions, country has adm tech 4
estate_church_build_temple_in_y = {
	can_select = {
		adm_tech = 7
		any_owned_province = {
			is_state_core = root
			OR = {
				AND = {
					ROOT = { adm_tech = 7 }
					NOT = { has_building = shrine }
					NOT = { has_building = temple }
					NOT = { has_building = cathedral }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { adm_tech = 13 }
					has_building = shrine
				}
				AND = {
					ROOT = { adm_tech = 33 }
					has_building = temple
				}
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					base_tax = 4
					NOT = { has_building = cathedral }
					OR = {
						AND = {
							ROOT = { adm_tech = 7 }
							NOT = { has_building = shrine }
							NOT = { has_building = cathedral }
							NOT = { has_building = temple }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { adm_tech = 13 }
							has_building = shrine
						}
						AND = {
							ROOT = { adm_tech = 33 }
							has_building = temple
						}
					}
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				base_tax = 7
				NOT = { has_building = cathedral }
				OR = {
					AND = {
						ROOT = { adm_tech = 7 }
						NOT = { has_building = shrine }
						NOT = { has_building = cathedral }
						NOT = { has_building = temple }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 13 }
						has_building = shrine
					}
					AND = {
						ROOT = { adm_tech = 33 }
						has_building = temple
					}
				}
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_church_build_temple_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = cathedral }
				OR = {
					AND = {
						ROOT = { adm_tech = 7 }
						NOT = { has_building = shrine }
						NOT = { has_building = temple }
						NOT = { has_building = cathedral }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 13 }
						has_building = shrine
					}
					AND = {
						ROOT = { adm_tech = 33 }
						has_building = temple
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_tax = 4
				NOT = { has_building = cathedral }
				OR = {
					AND = {
						ROOT = { adm_tech = 7 }
						NOT = { has_building = shrine }
						NOT = { has_building = temple }
						NOT = { has_building = cathedral }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 13 }
						has_building = shrine
					}
					AND = {
						ROOT = { adm_tech = 33 }
						has_building = temple
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_tax = 7
				NOT = { has_building = cathedral }
				OR = {
					AND = {
						ROOT = { adm_tech = 7 }
						NOT = { has_building = shrine }
						NOT = { has_building = temple }
						NOT = { has_building = cathedral }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 13 }
						has_building = shrine
					}
					AND = {
						ROOT = { adm_tech = 33 }
						has_building = temple
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					NOT = { has_building = shrine }
				}
				ROOT = {
					set_variable = {
						which = estate_church_build_temple_in_y_var
						value = 1
					}
				}
			}
			else_if = {
				limit = {
					NOT = { has_building = temple }
				}
				ROOT = {
					set_variable = {
						which = estate_church_build_temple_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_church_build_temple_in_y_var
						value = 3
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_church_build_temple_in_y_var
					value = 3
				}
			}
			event_target:agenda_province = {
				has_building = cathedral
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_church_build_temple_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				OR = {
					has_building = temple
					has_building = cathedral
				}
			}
		}
		else = {
			event_target:agenda_province = {
				OR = {
					has_building = temple
					has_building = cathedral
					has_building = shrine
				}
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_church
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_church }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_clergy_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_church
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
    }
}

estate_nobles_build_army_building_in_y = {
	can_select = {
		mil_tech = 4
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = military_academy }
			OR = {
				AND = {
					NOT = { has_building = barracks }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { mil_tech = 17 }
					NOT = { has_building = regimental_camp }
					has_building = barracks
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { mil_tech = 32 }
					OR = {
						has_building = regimental_camp
						has_building = barracks
						num_free_building_slots = 1
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					NOT = { has_building = military_academy }
					OR = {
						AND = {
							NOT = { has_building = barracks }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { mil_tech = 17 }
							NOT = { has_building = regimental_camp }
							has_building = barracks
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { mil_tech = 32 }
							OR = {
								has_building = regimental_camp
								has_building = barracks
								num_free_building_slots = 1
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				development = 6
				NOT = { has_building = military_academy }
				OR = {
					AND = {
						NOT = { has_building = barracks }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { mil_tech = 17 }
						NOT = { has_building = regimental_camp }
						has_building = barracks
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { mil_tech = 32 }
						OR = {
							has_building = regimental_camp
							has_building = barracks
							num_free_building_slots = 1
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_nobles_build_army_building_in_y_var
			value = 0
		}
		random_owned_province = {
			is_state_core = root
			NOT = { has_building = military_academy }
			OR = {
				AND = {
					NOT = { has_building = barracks }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { mil_tech = 17 }
					NOT = { has_building = regimental_camp }
					has_building = barracks
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { mil_tech = 32 }
					OR = {
						has_building = regimental_camp
						has_building = barracks
						num_free_building_slots = 1
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				development = 3
				NOT = { has_building = military_academy }
			OR = {
				AND = {
					NOT = { has_building = barracks }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { mil_tech = 17 }
					NOT = { has_building = regimental_camp }
					has_building = barracks
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { mil_tech = 32 }
					OR = {
						has_building = regimental_camp
						has_building = barracks
						num_free_building_slots = 1
					}
				}
			}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				development = 6
				NOT = { has_building = military_academy }
				OR = {
					AND = {
						NOT = { has_building = barracks }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { mil_tech = 17 }
						NOT = { has_building = regimental_camp }
						has_building = barracks
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { mil_tech = 32 }
						OR = {
							has_building = regimental_camp
							has_building = barracks
							num_free_building_slots = 1
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					NOT = { has_building = military_academy }
					ROOT = { mil_tech = 32 }
					OR = {
						num_free_building_slots = 1
						has_building = training_fields
					}
				}
				ROOT = {
					set_variable = {
						which = estate_nobles_build_army_building_in_y_var
						value = 6
					}
				}
			}
			else_if = {
				limit = {
					NOT = { has_building = training_fields }
					ROOT = { mil_tech = 22 }
					OR = {
						num_free_building_slots = 1
						has_building = barracks
					}
				}
				ROOT = {
					set_variable = {
						which = estate_nobles_build_army_building_in_y_var
						value = 5
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_nobles_build_army_building_in_y_var
						value = 4
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_nobles_build_army_building_in_y_var
					value = 6
				}
			}
			event_target:agenda_province = {
				has_building = military_academy
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_nobles_build_army_building_in_y_var
					value = 5
				}
			}
			event_target:agenda_province = {
				OR = {
					has_building = training_fields
					has_building = military_academy
				}
			}
		}
		else = {
			event_target:agenda_province = {
				OR = {
					has_building = barracks
					has_building = training_fields
					has_building = military_academy
				}
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_nobles
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_nobles }
		}
		else = {
			event_target:agenda_province = {
				add_base_manpower = 1
			}
		}
	}
	failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_nobles_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_nobles
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_nobles_build_fort_building_in_y = {
	can_select = {
		any_owned_province = {
			OR = {
				AND = {
					NOT = { has_building = fort_15th }
					NOT = { has_building = fort_16th }
					NOT = { has_building = fort_17th }
					NOT = { has_building = fort_18th }
					NOT = { has_building = fort_19th }
					num_free_building_slots = 1
					any_neighbor_province = {
						owner = {
							OR = {
								is_rival = root
								root = { is_rival = prev }
								AND = {
									is_subject_other_than_tributary_trigger = yes
									overlord = {
										OR = {
											is_rival = root
											root = { is_rival = prev }
										}
									}
								}
							}
						}
					}
					NOT = {
						any_neighbor_province = {
							owned_by = root
							OR = {
								has_building = fort_15th
								has_building = fort_16th
								has_building = fort_17th
								has_building = fort_18th
								has_building = fort_19th
							}
						}
					}
				}
				AND = {
					NOT = { has_building = fort_15th }
					NOT = { has_building = fort_16th }
					NOT = { has_building = fort_17th }
					NOT = { has_building = fort_18th }
					NOT = { has_building = fort_19th }
					num_free_building_slots = 1
					any_neighbor_province = {
						owned_by = root
						any_neighbor_province = {
							owner = {
								OR = {
									is_rival = root
									root = { is_rival = prev }
									AND = {
										is_subject_other_than_tributary_trigger = yes
										overlord = {
											OR = {
												is_rival = root
												root = { is_rival = prev }
											}
										}
									}
								}
							}
							NOT = {
								any_neighbor_province = {
									owned_by = root
									OR = {
										has_building = fort_15th
										has_building = fort_16th
										has_building = fort_17th
										has_building = fort_18th
										has_building = fort_19th
									}
								}
							}
						}
					}
				}
				AND = {
					has_building = fort_15th
					ROOT = { mil_tech = 12 }
				}
				AND = {
					has_building = fort_16th
					ROOT = { mil_tech = 24 }
				}
				AND = {
					has_building = fort_17th
					ROOT = { mil_tech = 34 }
				}
				AND = {
					has_building = fort_18th
					ROOT = { mil_tech = 41 }
				}
			}
			NOT = { has_building = fort_19th }
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 1.5
			any_neighbor_country = {
				OR = {
					is_rival = root
					root = { is_rival = prev }
				}
				army_size = root
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_nobles_build_fort_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				OR = {
					AND = {
						NOT = { has_building = fort_15th }
						NOT = { has_building = fort_16th }
						NOT = { has_building = fort_17th }
						NOT = { has_building = fort_18th }
						NOT = { has_building = fort_19th }
						num_free_building_slots = 1
						any_neighbor_province = {
							owner = {
								OR = {
									is_rival = root
									root = { is_rival = prev }
									AND = {
										is_subject_other_than_tributary_trigger = yes
										overlord = {
											OR = {
												is_rival = root
												root = { is_rival = prev }
											}
										}
									}
								}
							}
						}
						NOT = {
							any_neighbor_province = {
								owned_by = root
								OR = {
									has_building = fort_15th
									has_building = fort_16th
									has_building = fort_17th
									has_building = fort_18th
									has_building = fort_19th
								}
							}
						}
					}
					AND = {
						NOT = { has_building = fort_15th }
						NOT = { has_building = fort_16th }
						NOT = { has_building = fort_17th }
						NOT = { has_building = fort_18th }
						NOT = { has_building = fort_19th }
						num_free_building_slots = 1
						any_neighbor_province = {
							owned_by = root
							any_neighbor_province = {
								owner = {
									OR = {
										is_rival = root
										root = { is_rival = prev }
										AND = {
											is_subject_other_than_tributary_trigger = yes
											overlord = {
												OR = {
													is_rival = root
													root = { is_rival = prev }
												}
											}
										}
									}
								}
								NOT = {
									any_neighbor_province = {
										owned_by = root
										OR = {
											has_building = fort_15th
											has_building = fort_16th
											has_building = fort_17th
											has_building = fort_18th
											has_building = fort_19th
										}
									}
								}
							}
						}
					}
					AND = {
						has_building = fort_15th
						ROOT = { mil_tech = 12 }
					}
					AND = {
						has_building = fort_16th
						ROOT = { mil_tech = 24 }
					}
					AND = {
						has_building = fort_17th
						ROOT = { mil_tech = 34 }
					}
					AND = {
						has_building = fort_18th
						ROOT = { mil_tech = 41 }
					}
				}
				NOT = { has_building = fort_19th }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				OR = {
					AND = {
						NOT = { has_building = fort_15th }
						NOT = { has_building = fort_16th }
						NOT = { has_building = fort_17th }
						NOT = { has_building = fort_18th }
						NOT = { has_building = fort_19th }
						num_free_building_slots = 1
						any_neighbor_province = {
							owner = {
								OR = {
									is_rival = root
									root = { is_rival = prev }
									AND = {
										is_subject_other_than_tributary_trigger = yes
										overlord = {
											OR = {
												is_rival = root
												root = { is_rival = prev }
											}
										}
									}
								}
							}
						}
						NOT = {
							any_neighbor_province = {
								owned_by = root
								OR = {
									has_building = fort_15th
									has_building = fort_16th
									has_building = fort_17th
									has_building = fort_18th
									has_building = fort_19th
								}
							}
						}
						has_terrain = hills
					}
					AND = {
						NOT = { has_building = fort_15th }
						NOT = { has_building = fort_16th }
						NOT = { has_building = fort_17th }
						NOT = { has_building = fort_18th }
						NOT = { has_building = fort_19th }
						num_free_building_slots = 1
						any_neighbor_province = {
							owned_by = root
							any_neighbor_province = {
								owner = {
									OR = {
										is_rival = root
										root = { is_rival = prev }
										AND = {
											is_subject_other_than_tributary_trigger = yes
											overlord = {
												OR = {
													is_rival = root
													root = { is_rival = prev }
												}
											}
										}
									}
								}
								NOT = {
									any_neighbor_province = {
										owned_by = root
										OR = {
											has_building = fort_15th
											has_building = fort_16th
											has_building = fort_17th
											has_building = fort_18th
											has_building = fort_19th
										}
									}
								}
							}
						}
						has_terrain = hills
					}
					AND = {
						has_building = fort_15th
						ROOT = { mil_tech = 12 }
					}
					AND = {
						has_building = fort_16th
						ROOT = { mil_tech = 24 }
					}
					AND = {
						has_building = fort_17th
						ROOT = { mil_tech = 34 }
					}
					AND = {
						has_building = fort_18th
						ROOT = { mil_tech = 41 }
					}
				}
				NOT = { has_building = fort_19th }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				OR = {
					AND = {
						NOT = { has_building = fort_15th }
						NOT = { has_building = fort_16th }
						NOT = { has_building = fort_17th }
						NOT = { has_building = fort_18th }
						NOT = { has_building = fort_19th }
						num_free_building_slots = 1
						any_neighbor_province = {
							owner = {
								OR = {
									is_rival = root
									root = { is_rival = prev }
									AND = {
										is_subject_other_than_tributary_trigger = yes
										overlord = {
											OR = {
												is_rival = root
												root = { is_rival = prev }
											}
										}
									}
								}
							}
						}
						NOT = {
							any_neighbor_province = {
								owned_by = root
								OR = {
									has_building = fort_15th
									has_building = fort_16th
									has_building = fort_17th
									has_building = fort_18th
									has_building = fort_19th
								}
							}
						}
					}
					AND = {
						NOT = { has_building = fort_15th }
						NOT = { has_building = fort_16th }
						NOT = { has_building = fort_17th }
						NOT = { has_building = fort_18th }
						NOT = { has_building = fort_19th }
						num_free_building_slots = 1
						any_neighbor_province = {
							owned_by = root
							any_neighbor_province = {
								owner = {
									OR = {
										is_rival = root
										root = { is_rival = prev }
										AND = {
											is_subject_other_than_tributary_trigger = yes
											overlord = {
												OR = {
													is_rival = root
													root = { is_rival = prev }
												}
											}
										}
									}
								}
								NOT = {
									any_neighbor_province = {
										owned_by = root
										OR = {
											has_building = fort_15th
											has_building = fort_16th
											has_building = fort_17th
											has_building = fort_18th
											has_building = fort_19th
										}
									}
								}
							}
						}
						has_terrain = highlands
					}
					AND = {
						has_building = fort_15th
						ROOT = { mil_tech = 12 }
					}
					AND = {
						has_building = fort_16th
						ROOT = { mil_tech = 24 }
					}
					AND = {
						has_building = fort_17th
						ROOT = { mil_tech = 34 }
					}
					AND = {
						has_building = fort_18th
						ROOT = { mil_tech = 41 }
					}
				}
				NOT = { has_building = fort_19th }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				OR = {
					AND = {
						NOT = { has_building = fort_15th }
						NOT = { has_building = fort_16th }
						NOT = { has_building = fort_17th }
						NOT = { has_building = fort_18th }
						NOT = { has_building = fort_19th }
						num_free_building_slots = 1
						any_neighbor_province = {
							owner = {
								OR = {
									is_rival = root
									root = { is_rival = prev }
									AND = {
										is_subject_other_than_tributary_trigger = yes
										overlord = {
											OR = {
												is_rival = root
												root = { is_rival = prev }
											}
										}
									}
								}
							}
						}
						NOT = {
							any_neighbor_province = {
								owned_by = root
								OR = {
									has_building = fort_15th
									has_building = fort_16th
									has_building = fort_17th
									has_building = fort_18th
									has_building = fort_19th
								}
							}
						}
						has_terrain = mountain
					}
					AND = {
						NOT = { has_building = fort_15th }
						NOT = { has_building = fort_16th }
						NOT = { has_building = fort_17th }
						NOT = { has_building = fort_18th }
						NOT = { has_building = fort_19th }
						num_free_building_slots = 1
						any_neighbor_province = {
							owned_by = root
							any_neighbor_province = {
								owner = {
									OR = {
										is_rival = root
										root = { is_rival = prev }
										AND = {
											is_subject_other_than_tributary_trigger = yes
											overlord = {
												OR = {
													is_rival = root
													root = { is_rival = prev }
												}
											}
										}
									}
								}
								NOT = {
									any_neighbor_province = {
										owned_by = root
										OR = {
											has_building = fort_15th
											has_building = fort_16th
											has_building = fort_17th
											has_building = fort_18th
											has_building = fort_19th
										}
									}
								}
							}
						}
					}
					AND = {
						has_building = fort_15th
						ROOT = { mil_tech = 12 }
					}
					AND = {
						has_building = fort_16th
						ROOT = { mil_tech = 24 }
					}
					AND = {
						has_building = fort_17th
						ROOT = { mil_tech = 34 }
					}
					AND = {
						has_building = fort_18th
						ROOT = { mil_tech = 41 }
					}
				}
				NOT = { has_building = fort_19th }
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = fort_18th
				}
				ROOT = {
					set_variable = {
						which = estate_nobles_build_fort_building_in_y_var
						value = 5
					}
				}
			}
			else_if = {
				limit = {
					has_building = fort_17th
				}
				ROOT = {
					set_variable = {
						which = estate_nobles_build_fort_building_in_y_var
						value = 4
					}
				}
			}
			else_if = {
				limit = {
					has_building = fort_16th
				}
				ROOT = {
					set_variable = {
						which = estate_nobles_build_fort_building_in_y_var
						value = 3
					}
				}
			}
			else_if = {
				limit = {
					has_building = fort_15th
				}
				ROOT = {
					set_variable = {
						which = estate_nobles_build_fort_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_nobles_build_fort_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_nobles_build_fort_building_in_y_var
					value = 5
				}
			}
			event_target:agenda_province = {
				has_building = fort_19th
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_nobles_build_fort_building_in_y_var
					value = 4
				}
			}
			event_target:agenda_province = {
				has_building = fort_18th
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_nobles_build_fort_building_in_y_var
					value = 3
				}
			}
			event_target:agenda_province = {
				OR = {
					has_building = fort_17th
					has_building = fort_18th
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_nobles_build_fort_building_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				OR = {
					has_building = fort_16th
					has_building = fort_17th
					has_building = fort_18th
				}
			}
		}
		else = {
			event_target:agenda_province = {
				OR = {
					has_building = fort_15th
					has_building = fort_16th
					has_building = fort_17th
					has_building = fort_18th
				}
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		event_target:agenda_province = {
			add_base_manpower = 1
		}
	}
	failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_nobles_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_nobles
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_burghers_build_trade_building_in_y = {
	can_select = {
		dip_tech = 4
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = merchants_quarter }
			OR = {
				AND = {
					NOT = { has_building = marketplace }
					NOT = { has_building = trade_depot }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { dip_tech = 14 }
					NOT = { has_building = trade_depot }
					OR = {
						num_free_building_slots = 1
						has_building = marketplace
					}
				}
				AND = {
					ROOT = { dip_tech = 25 }
					OR = {
						num_free_building_slots = 1
						has_building = trade_depot
					}
				}
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.65
			NOT = {
				any_owned_province = {
					is_state_core = root
					OR = {
						province_has_center_of_trade_of_level = 1
						province_trade_power = 10
					}
					NOT = { has_building = merchants_quarter }
					OR = {
						AND = {
							NOT = { has_building = marketplace }
							NOT = { has_building = trade_depot }
							num_free_building_slots = 1
						}
						AND = {
							ROOT = { dip_tech = 14 }
							NOT = { has_building = trade_depot }
							OR = {
								num_free_building_slots = 1
								has_building = marketplace
							}
						}
						AND = {
							ROOT = { dip_tech = 25 }
							OR = {
								num_free_building_slots = 1
								has_building = trade_depot
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				OR = {
					province_has_center_of_trade_of_level = 2
					province_trade_power = 20
				}
				NOT = { has_building = merchants_quarter }
				OR = {
					AND = {
						NOT = { has_building = marketplace }
						NOT = { has_building = trade_depot }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { dip_tech = 14 }
						NOT = { has_building = trade_depot }
						OR = {
							num_free_building_slots = 1
							has_building = marketplace
						}
					}
					AND = {
						ROOT = { dip_tech = 25 }
						OR = {
							num_free_building_slots = 1
							has_building = trade_depot
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			is_institution_enabled = global_trade
			NOT = { has_institution = global_trade }
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_burghers_build_trade_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = merchants_quarter }
				OR = {
					AND = {
						NOT = { has_building = marketplace }
						NOT = { has_building = trade_depot }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { dip_tech = 14 }
						NOT = { has_building = trade_depot }
						OR = {
							num_free_building_slots = 1
							has_building = marketplace
						}
					}
					AND = {
						ROOT = { dip_tech = 25 }
						OR = {
							num_free_building_slots = 1
							has_building = trade_depot
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				OR = {
					province_has_center_of_trade_of_level = 1
					province_trade_power = 10
				}
				NOT = { has_building = merchants_quarter }
				OR = {
					AND = {
						NOT = { has_building = marketplace }
						NOT = { has_building = trade_depot }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { dip_tech = 14 }
						NOT = { has_building = trade_depot }
						OR = {
							num_free_building_slots = 1
							has_building = marketplace
						}
					}
					AND = {
						ROOT = { dip_tech = 25 }
						OR = {
							num_free_building_slots = 1
							has_building = trade_depot
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				OR = {
					province_has_center_of_trade_of_level = 2
					province_trade_power = 20
				}
				NOT = { has_building = merchants_quarter }
				OR = {
					AND = {
						NOT = { has_building = marketplace }
						NOT = { has_building = trade_depot }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { dip_tech = 14 }
						NOT = { has_building = trade_depot }
						OR = {
							num_free_building_slots = 1
							has_building = marketplace
						}
					}
					AND = {
						ROOT = { dip_tech = 25 }
						OR = {
							num_free_building_slots = 1
							has_building = trade_depot
						}
					}
				}
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = trade_depot
				}
				ROOT = {
					set_variable = {
						which = estate_burghers_build_trade_building_in_y_var
						value = 3
					}
				}
			}
			else_if = {
				limit = {
					has_building = marketplace
				}
				ROOT = {
					set_variable = {
						which = estate_burghers_build_trade_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_burghers_build_trade_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_burghers_build_trade_building_in_y_var
					value = 3
				}
			}
			event_target:agenda_province = {
				has_building = merchants_quarter
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = estate_burghers_build_trade_building_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				OR = {
					has_building = trade_depot
					has_building = merchants_quarter
				}
			}
		}
		else = {
			event_target:agenda_province = {
				OR = {
					has_building = marketplace
					has_building = trade_depot
					has_building = merchants_quarter
				}
			}
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 10
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_burghers
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_burghers }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
	}
	failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_burghers_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_burghers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}


# estate_burghers_build_port_building_in_y = {
	# can_select = {
		# dip_tech = 6
		# any_owned_province = {
			# is_state_core = root
			# has_port = yes
			# OR = {
				# NOT = { has_building = grand_shipyard }
				# NOT = { has_building = drydock }
			# }
			# OR = {
				# AND = {
					# NOT = { has_building = dock }
					# num_free_building_slots = 1
				# }
				# AND = {
					# ROOT = { dip_tech = 8 }
					# NOT = { has_building = shipyard }
					# num_free_building_slots = 1
				# }
				# AND = {
					# ROOT = { dip_tech = 19 }
					# NOT = { has_building = drydock }
					# OR = {
						# num_free_building_slots = 1
						# has_building = dock
					# }
				# }
				# AND = {
					# ROOT = { dip_tech = 24 }
					# NOT = { has_building = grand_shipyard }
					# OR = {
						# num_free_building_slots = 1
						# has_building = shipyard
					# }
				# }
			# }
		# }
	# }
	# selection_weight = {
		# factor = 1
		# modifier = {
			# factor = 0.75
			# always = yes
		# }
		# modifier = {
			# factor = 2
			# NOT = {
				# crown_land_share = 15
			# }
		# }
	# }
	# pre_effect = {
		# set_variable = {
			# which = estate_burghers_build_port_building_in_y_var
			# value = 0
		# }
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# has_port = yes
				# OR = {
					# NOT = { has_building = grand_shipyard }
					# NOT = { has_building = drydock }
				# }
				# OR = {
					# AND = {
						# NOT = { has_building = dock }
						# num_free_building_slots = 1
					# }
					# AND = {
						# ROOT = { dip_tech = 8 }
						# NOT = { has_building = shipyard }
						# num_free_building_slots = 1
					# }
					# AND = {
						# ROOT = { dip_tech = 19 }
						# NOT = { has_building = drydock }
						# OR = {
							# num_free_building_slots = 1
							# has_building = dock
						# }
					# }
					# AND = {
						# ROOT = { dip_tech = 24 }
						# NOT = { has_building = grand_shipyard }
						# OR = {
							# num_free_building_slots = 1
							# has_building = shipyard
						# }
					# }
				# }
			# }
			# save_event_target_as = agenda_province
		# }
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# development = 12
				# has_port = yes
				# OR = {
					# NOT = { has_building = grand_shipyard }
					# NOT = { has_building = drydock }
				# }
				# OR = {
					# AND = {
						# NOT = { has_building = dock }
						# num_free_building_slots = 1
					# }
					# AND = {
						# ROOT = { dip_tech = 8 }
						# NOT = { has_building = shipyard }
						# num_free_building_slots = 1
					# }
					# AND = {
						# ROOT = { dip_tech = 19 }
						# NOT = { has_building = drydock }
						# OR = {
							# num_free_building_slots = 1
							# has_building = dock
						# }
					# }
					# AND = {
						# ROOT = { dip_tech = 24 }
						# NOT = { has_building = grand_shipyard }
						# OR = {
							# num_free_building_slots = 1
							# has_building = shipyard
						# }
					# }
				# }
			# }
			# save_event_target_as = agenda_province
		# }
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# development = 20
				# has_port = yes
				# OR = {
					# NOT = { has_building = grand_shipyard }
					# NOT = { has_building = drydock }
				# }
				# OR = {
					# AND = {
						# NOT = { has_building = dock }
						# num_free_building_slots = 1
					# }
					# AND = {
						# ROOT = { dip_tech = 8 }
						# NOT = { has_building = shipyard }
						# num_free_building_slots = 1
					# }
					# AND = {
						# ROOT = { dip_tech = 19 }
						# NOT = { has_building = drydock }
						# OR = {
							# num_free_building_slots = 1
							# has_building = dock
						# }
					# }
					# AND = {
						# ROOT = { dip_tech = 24 }
						# NOT = { has_building = grand_shipyard }
						# OR = {
							# num_free_building_slots = 1
							# has_building = shipyard
						# }
					# }
				# }
			# }
			# save_event_target_as = agenda_province
		# }
		# event_target:agenda_province = {
			# if = {
				# limit = {
					# has_building = shipyard
					# NOT = { has_building = grand_shipyard }
					# ROOT = { dip_tech = 24 }
				# }
				# ROOT = {
					# set_variable = {
						# which = estate_burghers_build_port_building_in_y_var
						# value = 4
					# }
				# }
			# }
			# else_if = {
				# limit = {
					# NOT = { has_building = shipyard }
					# NOT = { has_building = grand_shipyard }
					# ROOT = { dip_tech = 8 }
				# }
				# ROOT = {
					# set_variable = {
						# which = estate_burghers_build_port_building_in_y_var
						# value = 3
					# }
				# }
			# }
			# else_if = {
				# limit = {
					# has_building = dock
				# }
				# ROOT = {
					# set_variable = {
						# which = estate_burghers_build_port_building_in_y_var
						# value = 2
					# }
				# }
			# }
			# else = {
				# ROOT = {
					# set_variable = {
						# which = estate_burghers_build_port_building_in_y_var
						# value = 1
					# }
				# }
			# }
		# }
	# }
	# provinces_to_highlight = {
		# province_id = event_target:agenda_province
	# }
	# fail_if = {
		# event_target:agenda_province = {
			# NOT = { owned_by = root }
		# }
	# }
    # task_requirements = {
		# if = {
			# limit = {
				# check_variable = {
					# which = estate_burghers_build_port_building_in_y_var
					# value = 4
				# }
			# }
			# event_target:agenda_province = {
				# has_building = grand_shipyard
			# }
		# }
		# else_if = {
			# limit = {
				# check_variable = {
					# which = estate_burghers_build_port_building_in_y_var
					# value = 3
				# }
			# }
			# event_target:agenda_province = {
				# OR = {
					# has_building = shipyard
					# has_building = grand_shipyard
				# }
			# }
		# }
		# else_if = {
			# limit = {
				# check_variable = {
					# which = estate_burghers_build_port_building_in_y_var
					# value = 2
				# }
			# }
			# event_target:agenda_province = {
				# has_building = drydock
			# }
		# }
		# else = {
			# event_target:agenda_province = {
				# OR = {
					# has_building = dock
					# has_building = drydock
				# }
			# }
		# }
    # }
    # task_completed_effect = {
		# add_estate_loyalty = {
			# estate = estate_burghers
			# loyalty = 10
		# }
		# if = {
			# limit = {
				# NOT = { crown_land_share = 15 }
				# estate_territory = {
					# estate = estate_burghers
					# territory = 10
				# }
			# }
			# take_estate_land_share_small = { estate = estate_burghers }
		# }
		# else = {
			# event_target:agenda_province = {
				# add_base_production = 1
			# }
		# }
    # }
    # failing_effect = {
		# event_target:agenda_province = {
			# if = {
				# limit = { owned_by = root }
				# add_named_unrest = {
					# name = local_burghers_displeased
					# value = 5
				# }
			# }
		# }
        # add_estate_loyalty_modifier = {
            # estate = estate_burghers
			# desc = EST_VAL_AGENDA_DENIED
			# loyalty = -5
			# duration = 7300
        # }
    # }
# }

estate_burghers_build_production_building_in_y = {
	can_select = {
		adm_tech = 6
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = industrial_zone }
			OR = {
				AND = {
					NOT = { has_building = workshop }
					num_free_building_slots = 1
				}
				AND = {
					ROOT = { adm_tech = 19 }
					OR = {
						has_building = workshop
						num_free_building_slots = 1
					}
				}
				AND = {
					ROOT = { adm_tech = 31 }
					OR = {
						has_building = artisans_guild
						num_free_building_slots = 1
					}
				}
				AND = {
					ROOT = { adm_tech = 39 }
					OR = {
						has_building = craftsmans_district
						num_free_building_slots = 1
					}
				}
			}
			NOT = { trade_goods = gold }
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				OR = {
					base_production = 7
					has_building = wharf
					has_building = weapons
					has_building = textile
					has_building = tradecompany
					has_building = farm_estate
					has_building = mills
					has_building = plantations
					has_building = furnace
				}
				NOT = {
					has_building = artisans_guild
					has_building = craftsmans_district
				}
				OR = {
					AND = {
						NOT = { has_building = workshop }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 19 }
						OR = {
							has_building = workshop
							num_free_building_slots = 1
						}
					}
					AND = {
						ROOT = { adm_tech = 31 }
						OR = {
							has_building = artisans_guild
							num_free_building_slots = 1
						}
					}
					AND = {
						ROOT = { adm_tech = 39 }
						OR = {
							has_building = craftsmans_district
							num_free_building_slots = 1
						}
					}
				}
				NOT = { trade_goods = gold }
			}
		}
		modifier = {
			factor = 2
			NOT = {
				crown_land_share = 15
			}
		}
	}
	pre_effect = {
		set_variable = {
			which = estate_burghers_build_production_building_in_y_var
			value = 0
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = industrial_zone }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 19 }
						OR = {
							has_building = workshop
							num_free_building_slots = 1
						}
					}
					AND = {
						ROOT = { adm_tech = 31 }
						OR = {
							has_building = artisans_guild
							num_free_building_slots = 1
						}
					}
					AND = {
						ROOT = { adm_tech = 39 }
						OR = {
							has_building = craftsmans_district
							num_free_building_slots = 1
						}
					}
				}
				NOT = { trade_goods = gold }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				base_production = 4
				NOT = { has_building = industrial_zone }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 19 }
						OR = {
							has_building = workshop
							num_free_building_slots = 1
						}
					}
					AND = {
						ROOT = { adm_tech = 31 }
						OR = {
							has_building = artisans_guild
							num_free_building_slots = 1
						}
					}
					AND = {
						ROOT = { adm_tech = 39 }
						OR = {
							has_building = craftsmans_district
							num_free_building_slots = 1
						}
					}
				}
				NOT = { trade_goods = gold }
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				OR = {
					base_production = 7
					has_building = wharf
					has_building = weapons
					has_building = textile
					has_building = tradecompany
					has_building = farm_estate
					has_building = mills
					has_building = plantations
					has_building = furnace
				}
				NOT = { has_building = industrial_zone }
				OR = {
					AND = {
						NOT = { has_building = workshop }
						num_free_building_slots = 1
					}
					AND = {
						ROOT = { adm_tech = 19 }
						OR = {
							has_building = workshop
							num_free_building_slots = 1
						}
					}
					AND = {
						ROOT = { adm_tech = 31 }
						OR = {
							has_building = artisans_guild
							num_free_building_slots = 1
						}
					}
					AND = {
						ROOT = { adm_tech = 39 }
						OR = {
							has_building = craftsmans_district
							num_free_building_slots = 1
						}
					}
				}
				NOT = { trade_goods = gold }
			}
			save_event_target_as = agenda_province
		}
		event_target:agenda_province = {
			if = {
				limit = {
					has_building = workshop
				}
				ROOT = {
					set_variable = {
						which = estate_burghers_build_production_building_in_y_var
						value = 2
					}
				}
			}
			else = {
				ROOT = {
					set_variable = {
						which = estate_burghers_build_production_building_in_y_var
						value = 1
					}
				}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		if = {
			limit = {
				check_variable = {
					which = estate_burghers_build_production_building_in_y_var
					value = 2
				}
			}
			event_target:agenda_province = {
				has_building = industrial_zone
			}
		}
		else = {
			event_target:agenda_province = {
				OR = {
					has_building = workshop
					has_building = industrial_zone
				}
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 10
		}
		if = {
			limit = {
				NOT = { crown_land_share = 15 }
				estate_territory = {
					estate = estate_burghers
					territory = 10
				}
			}
			take_estate_land_share_small = { estate = estate_burghers }
		}
		else = {
			event_target:agenda_province = {
				add_base_production = 1
			}
		}
	}
	failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_burghers_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_burghers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

# estate_nobles_build_manufactory_in_y = {
	# can_select = {
		# any_owned_province = {
			# is_state_core = root
			# root_can_build_manufactory_here_trigger = yes
			# has_nobles_trade_good_trigger = yes
		# }
		# monthly_income = 30
	# }
	# selection_weight = {
		# factor = 1
		# modifier = {
			# factor = 0.5
			# NOT = { monthly_income = 40 }
		# }
		# modifier = {
			# factor = 2
			# monthly_income = 60
		# }
	# }
	# pre_effect = {
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# root_can_build_manufactory_here_trigger = yes
				# has_nobles_trade_good_trigger = yes
			# }
			# save_event_target_as = agenda_province
		# }
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# base_production = 5
				# root_can_build_manufactory_here_trigger = yes
				# has_nobles_trade_good_trigger = yes
			# }
			# save_event_target_as = agenda_province
		# }
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# base_production = 10
				# root_can_build_manufactory_here_trigger = yes
				# has_nobles_trade_good_trigger = yes
			# }
			# save_event_target_as = agenda_province
		# }
	# }
	# provinces_to_highlight = {
		# province_id = event_target:agenda_province
	# }
	# fail_if = {
		# event_target:agenda_province = {
			# NOT = { owned_by = root }
		# }
	# }
    # task_requirements = {
		# event_target:agenda_province = {
			# custom_trigger_tooltip = {
				# tooltip = has_manufactory_trigger_tooltip
				
				# if = {
					# limit = {
						# OR = {
							# trade_goods = naval_supplies
							# trade_goods = fish
							# trade_goods = salt
						# }
					# }
					# has_building = wharf
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = copper
							# trade_goods = iron
						# }
					# }
					# has_building = weapons
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = wool
							# trade_goods = cloth
							# trade_goods = silk
							# trade_goods = dyes
						# }
					# }
					# has_building = textile
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = ivory
							# trade_goods = slaves
							# trade_goods = spices
							# trade_goods = fur
							# trade_goods = incense
						# }
					# }
					# has_building = tradecompany
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = grain
							# trade_goods = livestock
							# trade_goods = wine
						# }
					# }
					# has_building = farm_estate
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = paper
							# trade_goods = gems
							# trade_goods = tropical_wood
							# trade_goods = glass
							# trade_goods = chinaware
						# }
					# }
					# has_building = mills
				# }
				# else_if = {
					# limit = {
						# trade_goods = coal
					# }
					# has_building = furnace
				# }
				# else = {
					# has_building = plantations
				# }
			# }
		# }
    # }
    # task_completed_effect = {
		# add_estate_loyalty = {
			# estate = estate_nobles
			# loyalty = 10
		# }
		# event_target:agenda_province = {
			# add_base_manpower = 1
			# add_province_modifier = {
				# name = prospering_production
				# duration = 5475
			# }
		# }
    # }
    # failing_effect = {
		# event_target:agenda_province = {
			# if = {
				# limit = { owned_by = root }
				# add_named_unrest = {
					# name = local_nobles_displeased
					# value = 5
				# }
			# }
		# }
        # add_estate_loyalty_modifier = {
            # estate = estate_nobles
			# desc = EST_VAL_AGENDA_DENIED
			# loyalty = -5
			# duration = 7300
        # }
    # }
# }

# #should be 2x as likely
# estate_burghers_build_manufactory_in_y = {
	# can_select = {
		# any_owned_province = {
			# is_state_core = root
			# root_can_build_manufactory_here_trigger = yes
			# has_burghers_trade_good_trigger = yes
		# }
		# monthly_income = 30
	# }
	# selection_weight = {
		# factor = 2
		# modifier = {
			# factor = 0.5
			# NOT = { monthly_income = 40 }
		# }
		# modifier = {
			# factor = 2
			# monthly_income = 60
		# }
	# }
	# pre_effect = {
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# root_can_build_manufactory_here_trigger = yes
				# has_burghers_trade_good_trigger = yes
			# }
			# save_event_target_as = agenda_province
		# }
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# base_production = 5
				# root_can_build_manufactory_here_trigger = yes
				# has_burghers_trade_good_trigger = yes
			# }
			# save_event_target_as = agenda_province
		# }
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# base_production = 10
				# root_can_build_manufactory_here_trigger = yes
				# has_burghers_trade_good_trigger = yes
			# }
			# save_event_target_as = agenda_province
		# }
	# }
	# provinces_to_highlight = {
		# province_id = event_target:agenda_province
	# }
	# fail_if = {
		# event_target:agenda_province = {
			# NOT = { owned_by = root }
		# }
	# }
    # task_requirements = {
		# event_target:agenda_province = {
			# custom_trigger_tooltip = {
				# tooltip = has_manufactory_trigger_tooltip
				
				# if = {
					# limit = {
						# OR = {
							# trade_goods = naval_supplies
							# trade_goods = fish
							# trade_goods = salt
						# }
					# }
					# has_building = wharf
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = copper
							# trade_goods = iron
						# }
					# }
					# has_building = weapons
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = wool
							# trade_goods = cloth
							# trade_goods = silk
							# trade_goods = dyes
						# }
					# }
					# has_building = textile
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = ivory
							# trade_goods = slaves
							# trade_goods = spices
							# trade_goods = fur
							# trade_goods = incense
						# }
					# }
					# has_building = tradecompany
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = grain
							# trade_goods = livestock
							# trade_goods = wine
						# }
					# }
					# has_building = farm_estate
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = paper
							# trade_goods = gems
							# trade_goods = tropical_wood
							# trade_goods = glass
							# trade_goods = chinaware
						# }
					# }
					# has_building = mills
				# }
				# else_if = {
					# limit = {
						# trade_goods = coal
					# }
					# has_building = furnace
				# }
				# else = {
					# has_building = plantations
				# }
			# }
		# }
    # }
    # task_completed_effect = {
		# add_estate_loyalty = {
			# estate = estate_burghers
			# loyalty = 10
		# }
		# event_target:agenda_province = {
			# add_base_production = 1
			# add_province_modifier = {
				# name = prospering_production
				# duration = 5475
			# }
		# }
    # }
    # failing_effect = {
		# event_target:agenda_province = {
			# if = {
				# limit = { owned_by = root }
				# add_named_unrest = {
					# name = local_burghers_displeased
					# value = 5
				# }
			# }
		# }
        # add_estate_loyalty_modifier = {
            # estate = estate_burghers
			# desc = EST_VAL_AGENDA_DENIED
			# loyalty = -5
			# duration = 7300
        # }
    # }
# }

# estate_church_build_manufactory_in_y = {
	# can_select = {
		# any_owned_province = {
			# is_state_core = root
			# root_can_build_manufactory_here_trigger = yes
			# has_church_trade_good_trigger = yes
		# }
		# monthly_income = 30
	# }
	# selection_weight = {
		# factor = 1
		# modifier = {
			# factor = 0.75
			# always = yes
		# }
		# modifier = {
			# factor = 0.5
			# NOT = { monthly_income = 40 }
		# }
		# modifier = {
			# factor = 2
			# monthly_income = 60
		# }
	# }
	# pre_effect = {
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# root_can_build_manufactory_here_trigger = yes
				# has_church_trade_good_trigger = yes
			# }
			# save_event_target_as = agenda_province
		# }
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# base_production = 5
				# root_can_build_manufactory_here_trigger = yes
				# has_church_trade_good_trigger = yes
			# }
			# save_event_target_as = agenda_province
		# }
		# random_owned_province = {
			# limit = {
				# is_state_core = root
				# base_production = 10
				# root_can_build_manufactory_here_trigger = yes
				# has_church_trade_good_trigger = yes
			# }
			# save_event_target_as = agenda_province
		# }
	# }
	# provinces_to_highlight = {
		# province_id = event_target:agenda_province
	# }
	# fail_if = {
		# event_target:agenda_province = {
			# NOT = { owned_by = root }
		# }
	# }
    # task_requirements = {
		# event_target:agenda_province = {
			# custom_trigger_tooltip = {
				# tooltip = has_manufactory_trigger_tooltip
				
				# if = {
					# limit = {
						# OR = {
							# trade_goods = naval_supplies
							# trade_goods = fish
							# trade_goods = salt
						# }
					# }
					# has_building = wharf
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = copper
							# trade_goods = iron
						# }
					# }
					# has_building = weapons
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = wool
							# trade_goods = cloth
							# trade_goods = silk
							# trade_goods = dyes
						# }
					# }
					# has_building = textile
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = ivory
							# trade_goods = slaves
							# trade_goods = spices
							# trade_goods = fur
							# trade_goods = incense
						# }
					# }
					# has_building = tradecompany
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = grain
							# trade_goods = livestock
							# trade_goods = wine
						# }
					# }
					# has_building = farm_estate
				# }
				# else_if = {
					# limit = {
						# OR = {
							# trade_goods = paper
							# trade_goods = gems
							# trade_goods = tropical_wood
							# trade_goods = glass
							# trade_goods = chinaware
						# }
					# }
					# has_building = mills
				# }
				# else_if = {
					# limit = {
						# trade_goods = coal
					# }
					# has_building = furnace
				# }
				# else = {
					# has_building = plantations
				# }
			# }
		# }
    # }
    # task_completed_effect = {
		# add_estate_loyalty = {
			# estate = estate_church
			# loyalty = 10
		# }
		# event_target:agenda_province = {
			# add_base_tax = 1
			# add_province_modifier = {
				# name = prospering_production
				# duration = 5475
			# }
		# }
    # }
    # failing_effect = {
		# event_target:agenda_province = {
			# if = {
				# limit = { owned_by = root }
				# add_named_unrest = {
					# name = local_clergy_displeased
					# value = 5
				# }
			# }
		# }
        # add_estate_loyalty_modifier = {
            # estate = estate_church
			# desc = EST_VAL_AGENDA_DENIED
			# loyalty = -5
			# duration = 7300
        # }
    # }
# }

#Universities

estate_church_build_university_in_y = {
	can_select = {
		government = theocracy
		adm_tech = 32
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = university }
			OR = {
				development = 15
				is_capital = yes
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.75
			NOT = {
				any_owned_province = {
					is_state_core = root
					NOT = { has_building = university }
					development = 20
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				NOT = { has_building = university }
				development = 25
			}
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 15
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 20
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 25
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				is_capital = yes
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			has_building = university
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		add_adm_power = 35
		add_dip_power = 35
		add_mil_power = 35
	}
	failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_clergy_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_church
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_nobles_build_university_in_y = {
	can_select = {
		government = monarchy
		adm_tech = 32
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = university }
			OR = {
				development = 15
				is_capital = yes
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.75
			NOT = {
				any_owned_province = {
					is_state_core = root
					NOT = { has_building = university }
					development = 20
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				NOT = { has_building = university }
				development = 25
			}
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 15
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 20
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 25
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				is_capital = yes
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			has_building = university
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		add_adm_power = 35
		add_dip_power = 35
		add_mil_power = 35
	}
	failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_nobles_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_nobles
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}

estate_burghers_build_university_in_y = {
	can_select = {
		government = republic
		adm_tech = 32
		any_owned_province = {
			is_state_core = root
			NOT = { has_building = university }
			OR = {
				development = 15
				is_capital = yes
			}
		}
	}
	selection_weight = {
		factor = 1
		modifier = {
			factor = 0.75
			NOT = {
				any_owned_province = {
					is_state_core = root
					NOT = { has_building = university }
					development = 20
				}
			}
		}
		modifier = {
			factor = 1.2
			any_owned_province = {
				is_state_core = root
				NOT = { has_building = university }
				development = 25
			}
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 15
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 20
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				development = 25
			}
			save_event_target_as = agenda_province
		}
		random_owned_province = {
			limit = {
				is_state_core = root
				NOT = { has_building = university }
				is_capital = yes
			}
			save_event_target_as = agenda_province
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
	task_requirements = {
		event_target:agenda_province = {
			has_building = university
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 10
		}
		add_adm_power = 35
		add_dip_power = 35
		add_mil_power = 35
	}
	failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_burghers_displeased
					value = 5
				}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_burghers
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
	}
}




#### Develop the province
